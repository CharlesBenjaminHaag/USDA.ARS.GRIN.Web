
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutInterior.cshtml";
}

<div class="grid-container">
    <div class="grid-row grid-gap">
        <div class="usa-layout-docs__sidenav desktop:grid-col-2">
            <nav aria-label="Secondary navigation">
                <form class="usa-search usa-search--small" role="search">
                    <label class="usa-sr-only" for="search-field-en-small">Search</label>
                    <input class="usa-input" id="search-field-en-small" type="search" name="search" placeholder="Search GRIN-Global">
                    <button class="usa-button" type="submit">
                        <span class="usa-sr-only">Search</span>
                    </button>
                </form>
                <br />

                <ul class="usa-sidenav">
                    <li class="usa-sidenav__item">
                        <a href="">Home</a>
                    </li>
                    <li class="usa-sidenav__item">
                        <a href="#collections" class="usa-current">@TempData["PAGE_CONTEXT"]</a><ul class="usa-sidenav__sublist">

                            <li class="usa-sidenav__item">
                                <a href="#section-genetic-resource_collections" class="usa-current">Genetic Resource Collections</a><ul class="usa-sidenav__sublist">
                                    <li id="" class="usa-sidenav__item">
                                        <a href="#plant-germplasm">Plant Germplasm</a>
                                    </li>
                                    <li class="usa-sidenav__item">
                                        <a href="#animal-germplasm">Animal Germplasm</a>
                                    </li>
                                    <li class="usa-sidenav__item">
                                        <a href="#microbial-germplasm">Microbial Germplasm</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="usa-sidenav__item">
                                <a href="#grin-collections" class="usa-current">GRIN Collections</a><ul class="usa-sidenav__sublist">
                                    <li class="usa-sidenav__item">
                                        <a href="#grin-collections">Rhizobium Collection</a>
                                    </li>
                                    <li class="usa-sidenav__item">
                                        <a href="#grin-collections">PVP Applications</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>

        <main class="usa-layout-docs__main desktop:grid-col-9 usa-prose usa-layout-docs" id="main-content">
            <h1>Collections</h1>
            <p class="usa-intro measure-none">GRIN both provides data, and compiles references to databases hosted by collaborating projects.</p>

            <h2 id="section-genetic-resource_collections">Genetic Resource Collections</h2>
            
            <a name="plant-germplasm"></a>
            <h3>Plant Germplasm</h3>
            <section id="section-genetic-resource-collections">
                
                <p class="line-height-serif-4 margin-top-0 measure-none padding-bottom-05 margin-bottom-2">
                    The National Plant Germplasm System (NGPS) is a collaborative effort to safeguard the genetic diversity of agriculturally important plants. The mission of the NPGS is to support agricultural production by acquiring, conserving, evaluating, documenting, and distributing crop germplasm.
                </p>
                <section id="section-repository-map">
                    <div class="grid-container">
                        <div class="grid-row">
                            <h4>Repository Map (U.S. and Territories)</h4>
                            <div class="tablet:grid-col-12">
                                <div id="mapid" style="width:900px; height:700px;"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <a name="animal-germplasm"></a>
                <h3>Animal Germplasm</h3>
                <p class="line-height-serif-4 margin-top-0 measure-none padding-bottom-05 margin-bottom-2">
                    Animal genetic resources underpin the livestock sector’s production and profitability. As a result livestock industries contribute billions of dollars to national economies. Our mission is to acquire, evaluate and preserve these strategic resources so that industry and the research community can have access to a broad array of genetic variability for national security, the introduction of genetic variation, corrective mating, and various research initiatives.
                    <ul class="usa-collection__meta" aria-label="Topics">
                        <li class="usa-collection__meta-item usa-tag"><a href="https://nrrc.ars.usda.gov/A-GRIN/database_collaboration_page_dev">Animal Genetic Resources</a></li>
                        <li class="usa-collection__meta-item usa-tag"><a href="Search the Animal Germplasm Database">Animal Germplasm Database</a></li>
                    </ul>
                </p>

                <a name="microbial-germplasm"></a>
                <h3>Microbial Germplasm</h3>
                <p>
                    The goal of this program is to ensure that the genetic diversity of agriculturally important microorganisms is maintained to enhance and increase agricultural efficiency and profitability.The program will collect, authenticate and characterizepotentially useful microbial germplasm; preserve microbial genetic diversity; and facilitate distribution and utilization of microbial germplasm for research and industry.
                    Links
                </p>
            </section>

            <a name="grin-collections"></a>
            <h2>GRIN Collections</h2>
            <section>
                <div class="grid-row">
                    <div class="grid-col-6">
                        <h3 class="margin-x-0 margin-y-2">PVP Application Status</h3>
                        <ul class="usa-collection">
                            <li class="usa-collection__item">
                                <img class="usa-collection__img" src="~/assets/images/PVPSeal.png" alt="Alt text">
                                <div class="usa-collection__body">
                                    <h3 class="usa-collection__heading">
                                        <a class="usa-link" href="@Url.Action("Index","PVP")">PVP Application Status Database</a>
                                    </h3>
                                    <p class="usa-collection__description">
                                        The Plant Variety Protection Office (PVPO) provides intellectual property protection to breeders of new varieties of sexually reproduced, tuber propagated, and asexually reproduced plant varieties.
                                    </p>
                                    <ul class="usa-collection__meta" aria-label="More information">
                                        <li class="usa-collection__meta-item">
                                            <strong>Contact: </strong>
                                            <a href="mailto:PVPOmail@usda.gov">Bernadette Johnson, AMS</a>
                                        </li>
                                        <li class="usa-collection__meta-item">
                                            <strong>Last Updated: </strong>
                                            <time datetime="2020-09-30T12:00:00+01:00">
                                                September 30, 2020
                                            </time>
                                        </li>
                                    </ul>

                                    @*<ul class="usa-collection__meta" aria-label="Topics">
                                        <li class="usa-collection__meta-item usa-tag usa-tag--new">
                                            New
                                        </li>
                                        <li class="usa-collection__meta-item usa-tag">
                                            PMA
                                        </li>
                                        <li class="usa-collection__meta-item usa-tag">
                                            OMB
                                        </li>
                                    </ul>*@
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="grid-col-6">
                        <h3 class="margin-x-0 margin-y-2">Rhizobium Collection</h3>
                        <ul class="usa-collection">
                            <li class="usa-collection__item">
                                <img class="usa-collection__img" src="~/assets/images/rhizobium.jpg" alt="Alt text">
                                <div class="usa-collection__body">
                                    <h3 class="usa-collection__heading">
                                        <a class="usa-link" href="@Url.Action("Index","Rhizobium")">Rhizobium Collection</a>
                                    </h3>
                                    <p class="usa-collection__description">The Collection is a service-oriented program with a major objective of distributing characterized germplasm of rhizobia to stakeholders in industry for use in inoculants and for research at State, Federal and University laboratories. </p>
                                    <ul class="usa-collection__meta" aria-label="More information">
                                        <li class="usa-collection__meta-item">
                                            <strong>Contact: </strong>
                                            <a href="mailto:patrick.elia@usda.gov">
                                                Patrick Elia
                                            </a>
                                        </li>
                                        <li class="usa-collection__meta-item">
                                            <strong>Last Updated: </strong>
                                            <time datetime="2020-09-30T12:00:00+01:00">
                                                September 30, 2020
                                            </time>
                                        </li>
                                    </ul>

                                    <!-- TODO: MOVE PDF EMBED CODE -->
                                    @*<embed src="https://apps.ams.usda.gov/CMS//AdobeImages/201500355.pdf" type="application/pdf" width="100%" height="600px" />
                                    <embed src="https://drive.google.com/viewerng/
viewer?embedded=true&url=https://apps.ams.usda.gov/CMS//AdobeImages/201500355.pdf" width="500" height="375">

                                    <iframe src="https://docs.google.com/viewer?url=https://apps.ams.usda.gov/CMS//AdobeImages/201500355.pdf&embedded=true" frameborder="0" height="500px" width="100%"></iframe>*@

                                    @*<ul class="usa-collection__meta" aria-label="Topics">
                                        <li class="usa-collection__meta-item usa-tag usa-tag--new">
                                            New
                                        </li>
                                        <li class="usa-collection__meta-item usa-tag">
                                            PMA
                                        </li>
                                        <li class="usa-collection__meta-item usa-tag">
                                            OMB
                                        </li>
                                    </ul>*@
                                </div>
                            </li>

                        </ul>
                    </div>
                </div>
            </section>
        </main>
    </div>
</div>

<div id="section-modal">

</div>


<script type="text/javascript" src="https://leafletjs.com/examples/choropleth/us-states.js"></script>
<script type="text/javascript">

    var map = L.map('mapid').setView([37.8, -96], 4);

    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
        maxZoom: 18,
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
            'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
        id: 'mapbox/light-v9',
        tileSize: 512,
        zoomOffset: -1
    }).addTo(map);

    var onMarkerClick = function (e) {
      
        var link = '@Url.Action("_Detail", "Site")';

        $.ajax(
            {
                type: 'POST',
                url: link,
                data: { id : this.options.myCustomId },
                success:
                    function (response) {
                        $("#section-modal").html(response);
                        $('#myModal').modal('show');
                    },
                error:
                    function (response) {
                        console.log(response);
                    }
            });
    }

    //TODO: PDF EMBED
    if (navigator.userAgent.search("MSIE") >= 0) {
        //code goes here
    }
    else if (navigator.userAgent.search("Chrome") >= 0) {
        //alert("DEBUG CHROME");
    }
    else if (navigator.userAgent.search("Firefox") >= 0) {
        //code goes here
    }
    else if (navigator.userAgent.search("Safari") >= 0 && navigator.userAgent.search("Chrome") < 0) {
        //code goes here
    }
    else if (navigator.userAgent.search("Opera") >= 0) {
        //code goes here
    }




    var siteId = "";

    siteId = "1";
    var marker = L.marker([30.619591837167704, -96.36182821750184], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "13";
    var marker = L.marker([38.534862012868864, -121.75462764434283], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "15";
    var marker = L.marker([39.026515487598985, -76.9234882308379], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "19";
    var marker = L.marker([42.95707938078901, -112.82869678657434], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "31";
    var marker = L.marker([40.10305195116381, -88.22429523081477], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "37";
    var marker = L.marker([36.59667464938536, -119.51265894622854], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "42";
    var marker = L.marker([40.57317281015742, -105.07967561730995], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "2";
    var marker = L.marker([30.522515482482035, -96.42369203284417], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "3";
    var marker = L.marker([44.552400416076324, -123.22075287304186], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "4";
    var marker = L.marker([38.534862012868864, -121.75462764434283], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "5";
    var marker = L.marker([42.87768028143282, -77.0072383607277], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "6";
    var marker = L.marker([19.69834611262494, -155.09389535997298], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "7";
    var marker = L.marker([18.20681304702269, -67.13602555814018], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);

    siteId = "8";
    var marker = L.marker([25.64388309000814, -80.2917109157293], { myCustomId: siteId });
    marker.on('click', onMarkerClick);
    marker.addTo(map);


    //8	
    //9	33.968078033711286, -117.33456035792699
    //16	42.008928272568696, -93.66361315989242
    //17	42.87763358522057, -77.00722278842248
    //38	40.00198912431977, -83.02888870382807
    //22	33.2677625332149, -84.2877572904676
    //29	44.87961782641051, -87.33528967303394
    //40	34.47581490375999, -91.41872793277506
    //24	40.10145444323368, -88.22267277499076
    //26	46.73192943628397, -117.15788711531751



    var geojson;

    function resetHighlight(e) {
        geojson.resetStyle(e.target);
        info.update();
    }

    function zoomToFeature(e) {
        map.fitBounds(e.target.getBounds());
    }

    function onEachFeature(feature, layer) {
        layer.on({
            mouseover: highlightFeature,
            mouseout: resetHighlight,
            click: zoomToFeature
        });
    }

    map.attributionControl.addAttribution('Population data &copy; <a href="http://census.gov/">US Census Bureau</a>');

    var legend = L.control({ position: 'bottomright' });

    legend.onAdd = function (map) {

        var div = L.DomUtil.create('div', 'info legend'),
            grades = [0, 10, 20, 50, 100, 200, 500, 1000],
            labels = [],
            from, to;

        for (var i = 0; i < grades.length; i++) {
            from = grades[i];
            to = grades[i + 1];

            labels.push(
                '<i style="background:' + getColor(from + 1) + '"></i> ' +
                from + (to ? '&ndash;' + to : '+'));
        }

        div.innerHTML = labels.join('<br>');
        return div;
    };

    legend.addTo(map);

</script>
